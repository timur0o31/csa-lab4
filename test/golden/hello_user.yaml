in_source: |
  str s1 "What is your name?"
  var buffer
  var data_ready
  var ind
  str s2 "Hello, "
  array buf 10
  : print_str
      begin
          dup @
          dup 0 != if
              out 1
              inc
          else
              drop
              exit
          then
      again
  ;
  : read
      begin
          data_ready @
          0 != if
              buffer @
              0 != if
                  buffer @ buf ind @ + !
                  ind @ inc ind !
                  0 data_ready !
              else
                  exit
              then
          then
      again
  ;
  : interrupt_handler
      in 0
      buffer !
      1 data_ready !
  ;
  0 data_ready !
  0 buffer !
  0 ind !
  eint
  s1 print_str
  10 out 1
  read
  s2 print_str
  buf print_str
  33 out 1
  halt
in_stdin: |
  400 0 T
  500 0 i
  600 0 m
  700 0 r
  800 0 t
  900 0 \0

out_instructions: !!binary |
  AAAAWAQAAAAEAAAUCAAAAAQAAAAEAAATCAAAAAQAAAAEAAAVCAAAAGgAAAAEAAAABAAAGkgAAAAEAAAKFAAAAQQAAC9IAAAABAAAFgQAABpIAAAABAAAHgQAABpIAAAABAAAIRQAAAFwAAAAXAAAAAwAAABcAAAABAAAA
  CAAAAAEAAAmWAAAAEwAAAAUAAABLAAAAAQAACtEAAAAYAAAAAQAACwsAAAALAAAAEQAAAB0AAAABAAAGkQAAABUAAAABAAAFAwAAAAEAAAAIAAAAAQAAFNYAAAATAAAAAQAABMMAAAABAAAACAAAAAEAABOWAAAAEwAAA
  AEAAATDAAAAAQAAB4EAAAVDAAAABgAAAAIAAAABAAAFQwAAAAsAAAABAAAFQgAAAAEAAAABAAAFAgAAAAEAABSRAAAAAQAAFUsAAAALAAAAEQAAAB0AAAAdAAAAHQAAAAEAAAvRAAAAFQAAAAQAAAABAAAEwgAAAAEAAABBAAAFAgAAABkAAAA
out_data: !!binary |
  AAAAVwAAAGgAAABhAAAAdAAAACAAAABpAAAAcwAAACAAAAB5AAAAbwAAAHUAAAByAAAAIAAAAG4AAABhAAAAbQAAAGUAAAA/AAAAAAAAAAAAAAAAAAAAAAAAAEgAAABlAAAAbAAAAGwAAABvAAAALAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==
out_stdout: |
  source LoC: 50 code instr: 95
  ============================================================

out_instructions_hex: |
  0 - 04000000 - lit 0
  1 - 04000014 - lit 20
  2 - 08000000 - store
  3 - 04000000 - lit 0
  4 - 04000013 - lit 19
  5 - 08000000 - store
  6 - 04000000 - lit 0
  7 - 04000015 - lit 21
  8 - 08000000 - store
  9 - 68000000 - eint
  10 - 04000000 - lit 0
  11 - 0400001A - lit 26
  12 - 48000000 - call
  13 - 0400000A - lit 10
  14 - 14000001 - out 1
  15 - 0400002F - lit 47
  16 - 48000000 - call
  17 - 04000016 - lit 22
  18 - 0400001A - lit 26
  19 - 48000000 - call
  20 - 0400001E - lit 30
  21 - 0400001A - lit 26
  22 - 48000000 - call
  23 - 04000021 - lit 33
  24 - 14000001 - out 1
  25 - 70000000 - halt
  26 - 5C000000 - dup
  27 - 0C000000 - load
  28 - 5C000000 - dup
  29 - 04000000 - lit 0
  30 - 20000000 - sub
  31 - 04000026 - lit 38
  32 - 58000000 - swap
  33 - 4C000000 - jz
  34 - 14000001 - out 1
  35 - 2C000000 - inc
  36 - 0400002B - lit 43
  37 - 44000000 - jump
  38 - 60000000 - drop
  39 - 0400002C - lit 44
  40 - 2C000000 - inc
  41 - 2C000000 - inc
  42 - 44000000 - jump
  43 - 74000000 - nop
  44 - 0400001A - lit 26
  45 - 44000000 - jump
  46 - 54000000 - ret
  47 - 04000014 - lit 20
  48 - 0C000000 - load
  49 - 04000000 - lit 0
  50 - 20000000 - sub
  51 - 04000053 - lit 83
  52 - 58000000 - swap
  53 - 4C000000 - jz
  54 - 04000013 - lit 19
  55 - 0C000000 - load
  56 - 04000000 - lit 0
  57 - 20000000 - sub
  58 - 0400004E - lit 78
  59 - 58000000 - swap
  60 - 4C000000 - jz
  61 - 04000013 - lit 19
  62 - 0C000000 - load
  63 - 0400001E - lit 30
  64 - 04000015 - lit 21
  65 - 0C000000 - load
  66 - 18000000 - add
  67 - 08000000 - store
  68 - 04000015 - lit 21
  69 - 0C000000 - load
  70 - 2C000000 - inc
  71 - 04000015 - lit 21
  72 - 08000000 - store
  73 - 04000000 - lit 0
  74 - 04000014 - lit 20
  75 - 08000000 - store
  76 - 04000052 - lit 82
  77 - 44000000 - jump
  78 - 04000055 - lit 85
  79 - 2C000000 - inc
  80 - 2C000000 - inc
  81 - 44000000 - jump
  82 - 74000000 - nop
  83 - 74000000 - nop
  84 - 74000000 - nop
  85 - 0400002F - lit 47
  86 - 44000000 - jump
  87 - 54000000 - ret
  88 - 10000000 - in 0
  89 - 04000013 - lit 19
  90 - 08000000 - store
  91 - 04000001 - lit 1
  92 - 04000014 - lit 20
  93 - 08000000 - store
  94 - 64000000 - iret
out_data_hex: |
  0 - 00000057
  1 - 00000068
  2 - 00000061
  3 - 00000074
  4 - 00000020
  5 - 00000069
  6 - 00000073
  7 - 00000020
  8 - 00000079
  9 - 0000006F
  10 - 00000075
  11 - 00000072
  12 - 00000020
  13 - 0000006E
  14 - 00000061
  15 - 0000006D
  16 - 00000065
  17 - 0000003F
  18 - 00000000
  19 - 00000000
  20 - 00000000
  21 - 00000000
  22 - 00000048
  23 - 00000065
  24 - 0000006C
  25 - 0000006C
  26 - 0000006F
  27 - 0000002C
  28 - 00000020
  29 - 00000000
  30 - 00000000
  31 - 00000000
  32 - 00000000
  33 - 00000000
  34 - 00000000
  35 - 00000000
  36 - 00000000
  37 - 00000000
  38 - 00000000
  39 - 00000000

